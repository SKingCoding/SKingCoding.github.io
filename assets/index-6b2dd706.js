import{r as u,a as A,m,l as F,A as I,R as U}from"./vendor-e31379e3.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function d(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(t){if(t.ep)return;t.ep=!0;const s=d(t);fetch(t.href,s)}})();var R={exports:{}},v={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P=u,T=Symbol.for("react.element"),H=Symbol.for("react.fragment"),J=Object.prototype.hasOwnProperty,D=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q={key:!0,ref:!0,__self:!0,__source:!0};function w(i,n,d){var o,t={},s=null,c=null;d!==void 0&&(s=""+d),n.key!==void 0&&(s=""+n.key),n.ref!==void 0&&(c=n.ref);for(o in n)J.call(n,o)&&!q.hasOwnProperty(o)&&(t[o]=n[o]);if(i&&i.defaultProps)for(o in n=i.defaultProps,n)t[o]===void 0&&(t[o]=n[o]);return{$$typeof:T,type:i,key:s,ref:c,props:t,_owner:D.current}}v.Fragment=H;v.jsx=w;v.jsxs=w;R.exports=v;var e=R.exports,S={},C=A;S.createRoot=C.createRoot,S.hydrateRoot=C.hydrateRoot;function Y({onSubmit:i}){const[n,d]=u.useState(""),o=t=>{t.preventDefault(),n.trim()&&i(n.trim())};return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"username-form",children:[e.jsx("h2",{children:"Enter Your Username"}),e.jsxs("form",{onSubmit:o,children:[e.jsx("input",{type:"text",value:n,onChange:t=>d(t.target.value),placeholder:"Username",className:"username-input",maxLength:20,required:!0}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"submit-btn",disabled:!n.trim(),children:"Continue"})]})]})}function k({onCreateLobby:i,onJoinLobby:n,error:d}){const[o,t]=u.useState(""),s=c=>{c.preventDefault(),o.trim()&&n(o.trim())};return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"lobby-options",children:[e.jsx("h2",{children:"Choose an Option"}),d&&e.jsx("div",{className:"error-message",children:d}),e.jsxs("div",{className:"options-container",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:i,className:"create-lobby-btn",children:"Create New Lobby"}),e.jsxs("div",{className:"join-lobby-section",children:[e.jsx("h3",{children:"Join Existing Lobby"}),e.jsxs("form",{onSubmit:s,children:[e.jsx("input",{type:"text",value:o,onChange:c=>t(c.target.value),placeholder:"Enter lobby code",className:"lobby-code-input"}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},type:"submit",className:"join-lobby-btn",disabled:!o.trim(),children:"Join Lobby"})]})]})]})]})}function M({socket:i,lobby:n,username:d,isHost:o}){const[t,s]=u.useState(5),c=()=>{o&&(i.emit("setRounds",{code:n.code,rounds:t}),i.emit("startGame",{code:n.code}))};return e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"lobby",children:[e.jsx("h2",{children:"Game Lobby"}),e.jsxs("div",{className:"lobby-code",children:[e.jsx("p",{children:"Lobby Code:"}),e.jsx("h3",{children:n.code})]}),e.jsxs("div",{className:"players-list",children:[e.jsxs("h3",{children:["Players (",n.users.length,")"]}),e.jsx("ul",{children:n.users.map(l=>e.jsxs("li",{className:l.isHost?"host":"",children:[l.username," ",l.isHost?"(Host)":""]},l.id))})]}),o&&e.jsxs("div",{className:"game-settings",children:[e.jsx("h3",{children:"Game Settings"}),e.jsxs("div",{className:"rounds-selector",children:[e.jsx("label",{htmlFor:"rounds",children:"Number of Rounds:"}),e.jsx("select",{id:"rounds",value:t,onChange:l=>s(Number(l.target.value)),children:[3,5,7,10].map(l=>e.jsx("option",{value:l,children:l},l))})]}),e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:c,className:"start-game-btn",disabled:n.users.length<2,children:"Start Game"})]})]})}function $({socket:i,lobby:n,username:d}){var g;const[o,t]=u.useState(null),[s,c]=u.useState(null),[l,N]=u.useState(null),[y,f]=u.useState(!1);u.useEffect(()=>(i.on("newRound",p=>{console.log("New round:",p),t(p),f(p.playerId===i.id),N(null),c(null)}),i.on("yourQuestion",({question:p})=>{console.log("Your question:",p),c(p)}),i.on("coinFlipped",({coinResult:p,question:b})=>{console.log("Coin flipped:",p,b),N(p),b&&c(b)}),()=>{i.off("newRound"),i.off("yourQuestion"),i.off("coinFlipped")}),[i]);const x=()=>{i.emit("flipCoin",{code:n.code})};return o?e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"game",children:[e.jsx("div",{className:"game-header",children:e.jsxs("h2",{children:["Round ",o.currentRound," of ",o.totalRounds]})}),e.jsxs("div",{className:"game-content",children:[y?e.jsxs("div",{className:"your-turn",children:[e.jsx("h3",{children:"It's your turn!"}),s&&e.jsx("div",{className:"question",children:e.jsx("p",{children:s})}),!l&&e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:x,className:"flip-coin-btn",children:"Flip Coin"})]}):e.jsx("div",{className:"waiting",children:e.jsxs("h3",{children:["Waiting for ",(g=n.users.find(p=>p.id===o.playerId))==null?void 0:g.username,"'s turn..."]})}),l&&e.jsxs("div",{className:"coin-result",children:[e.jsxs("h3",{children:["Coin landed on: ",l]}),l==="heads"&&s&&e.jsx("div",{className:"question",children:e.jsx("p",{children:s})})]})]})]}):e.jsx("div",{className:"game-loading",children:e.jsx("h2",{children:"Waiting for game to start..."})})}const B="https://twilight-salad-e6bc.shantanu-narayan117.workers.dev",a=F(B,{transports:["polling"],reconnection:!0,reconnectionAttempts:1/0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,timeout:2e4,withCredentials:!1,forceNew:!0,autoConnect:!1,path:"/socket.io/",extraHeaders:{"Access-Control-Allow-Origin":"https://skingcoding.github.io"}});function Q(){const[i,n]=u.useState(""),[d,o]=u.useState("username"),[t,s]=u.useState(null),[c,l]=u.useState(null),[N,y]=u.useState(!1),[f,x]=u.useState(0);u.useEffect(()=>(console.log("Initializing socket connection..."),a.on("connect",()=>{console.log("Socket connected successfully"),y(!0),l(null),x(0)}),a.on("connect_error",r=>{console.error("Socket connection error:",r),y(!1),x(h=>h+1),f>=3&&(console.log("Switching to alternative transport..."),a.io.opts.transports=["polling"],a.connect()),f>=5&&l("Failed to connect to game server. Please try again later.")}),a.on("disconnect",r=>{console.log("Socket disconnected:",r),y(!1),r==="io server disconnect"&&a.connect()}),a.on("lobbyUpdate",r=>{console.log("Lobby updated:",r),s(r)}),a.on("gameStarted",r=>{console.log("Game started:",r),o("game"),s(r)}),a.on("gameEnded",()=>{console.log("Game ended"),o("username"),s(null)}),console.log("Attempting to connect to server..."),a.connect(),()=>{console.log("Cleaning up socket connection..."),a.off("connect"),a.off("connect_error"),a.off("disconnect"),a.off("lobbyUpdate"),a.off("gameStarted"),a.off("gameEnded"),a.disconnect()}),[f]);const g=r=>{console.log("Username submitted:",r),n(r),o("lobbyOptions")},p=()=>{console.log("Creating new lobby..."),l(null),a.emit("createLobby",{username:i},r=>{console.log("Create lobby response:",r),r.error?l(r.error):(s(r),o("lobby"))})},b=r=>{console.log("Joining lobby:",r),l(null),a.emit("joinLobby",{code:r,username:i},h=>{console.log("Join lobby response:",h),h.error?l(h.error):(s(h),o("lobby"))})},L=r=>{console.log("Setting rounds:",r),a.emit("setRounds",{code:t.code,rounds:r})},E=()=>{console.log("Starting game..."),a.emit("startGame",{code:t.code})},_=r=>{console.log("Flipping coin:",r),a.emit("flipCoin",{code:t.code,choice:r})},O=()=>{console.log("Moving to next round..."),a.emit("nextRound",{code:t.code})},G=()=>{console.log("Ending game..."),a.emit("endGame",{code:t.code})},j=()=>{switch(d){case"username":return e.jsx(Y,{onSubmit:g});case"lobbyOptions":return e.jsx(k,{onCreateLobby:p,onJoinLobby:b,error:c});case"lobby":return e.jsx(M,{socket:a,lobby:t,username:i,isHost:(t==null?void 0:t.hostId)===a.id,onSetRounds:L,onStartGame:E});case"game":return e.jsx($,{socket:a,lobby:t,username:i,onFlipCoin:_,onNextRound:O,onEndGame:G});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 to-blue-500 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-4xl",children:e.jsxs(I,{mode:"wait",children:[c&&e.jsx(m.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-red-500 text-white p-4 rounded-lg mb-4 text-center",children:c}),d==="username"&&e.jsx(m.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},children:j()},"username"),d==="lobbyOptions"&&e.jsx(m.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},children:j()},"lobby-options"),d==="lobby"&&t&&e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:j()},"lobby"),d==="game"&&t&&e.jsx(m.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},children:j()},"game")]})})})}S.createRoot(document.getElementById("root")).render(e.jsx(U.StrictMode,{children:e.jsx(Q,{})}));
//# sourceMappingURL=index-6b2dd706.js.map
